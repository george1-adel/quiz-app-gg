<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุธุงู ุงูุงุฎุชุจุงุฑุงุช</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- ูุงูุฐุฉ ุงูุชุญุฏูุซุงุช ุงูุฌุฏูุฏุฉ -->
    <div id="updates-modal" class="modal" style="display:flex; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:5000; align-items:center; justify-content:center;">
        <div style="background:#fff; padding:32px 24px; border-radius:12px; max-width:90vw; min-width:320px; text-align:center; box-shadow:0 2px 16px #0002; position:relative;">
            <h2 style="color:#3498db; margin-bottom:1rem;">๐ ุชุญุฏูุซ ุฌุฏูุฏ!</h2>
            <div style="font-size:1.1rem; color:#222; margin-bottom:1.5rem;">
                <b>ุชูุช ุฅุถุงูุฉ ุฃุณุฆูุฉ ุฌุฏูุฏุฉ ูุชุนุฏููุงุช ูุชุญุณููุงุช ุนูู ุงููุธุงู.</b><br>
                <ul style="text-align:right; margin:1rem 0 1.5rem 0; padding-right:1.5rem; color:#444; font-size:1rem;">
                    <li>ุฅุถุงูุฉ ูุฌููุนุฉ ุฃุณุฆูุฉ ุตุญ ูุฎุทุฃ ูุงุฎุชูุงุฑ ูู ูุชุนุฏุฏ ุฌุฏูุฏุฉ.</li>
                    <li>ุชุนุฏููุงุช ุดูููุฉ ูุชุณูููุงุช ูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู.</li>
                    <li>ุฅุตูุงุญ ุจุนุถ ุงููุดุงูู ุงูุจุฑูุฌูุฉ ุงูุณุงุจูุฉ.</li>
                </ul>
                ุฌุฑุจ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ ุงูุขู!<br>
                <a href="https://t.me/QuizAppgg" target="_blank" style="display:inline-block; margin:1rem 0 0.5rem 0; color:#0077b6; font-weight:bold; text-decoration:underline; font-size:1.08rem;">ุงูุถู ูุฌุฑูุจ ุงูุชููุฌุฑุงู ุงูุฎุงุต ุจุงูุชุญุฏูุซุงุช ูุงูุฃุฎุจุงุฑ</a><br>
                <span style="color:#888; font-size:0.95rem;">(ุฏู ุงูุฌุฑูุจ ุงููู ูููุฒู ุนููู ุฃุฎุจุงุฑ ุงูุชุญุฏูุซุงุช ูุงูููุงุฏ ุงูุฌุฏูุฏุฉ ููู ุฌุฏูุฏ ูู ุงูุชุทุจูู)</span><br>
                <span style="color:#888; font-size:0.95rem;">(ููููู ุฅุบูุงู ูุฐู ุงููุงูุฐุฉ ูููุชุงุจุนุฉ)</span>
            </div>
            <button id="close-updates-modal" class="btn" style="min-width:120px; font-size:1.1rem;">ุญุณูุงู</button>
        </div>
    </div>
    </div>
    <div class="container">
        <div id="welcome-page" class="page active">
            <h1>ูุฑุญุจุง ุจู ูู ุงููุฏุนูุฉ</h1>
            <p>ุงุฏุฎู ูุนุงูุง ูู ุฒููุฉ ุงูููุงุจ</p>
            <button onclick="goToNextStep()" class="btn">ุงุฏุฎู</button>
        </div>

        <div id="username-page" class="page">
            <h2>ุงูุชุจ ุงุณูู ุนุดุงู ุชุจุฏุฃ</h2>
            <input type="text" id="username-input" placeholder="ุงุณูู" class="input" style="padding:10px; font-size:1rem; width:60%; margin-bottom:1rem;" />
            <br>
            <button class="btn" onclick="submitUsername()">ููุง ุจููุง</button>
        </div>

        <div id="chapter-select-page" class="page">
            <h2 id="chapter-select-title">ุงุฎุชุงุฑ ุงููุตู ุฃู ุงููููุฌ</h2>
            <div id="chapter-options" class="count-options">
                <button class="btn" onclick="selectChapter(1)">ุงููุตู ุงูุฃูู</button>
                <button class="btn" onclick="selectChapter(2)">ุงููุตู ุงูุซุงูู</button>
                <button class="btn" onclick="selectChapter(3)">ุงููุตู ุงูุซุงูุซ</button>
                <button class="btn" onclick="selectChapter(4)">ุงููุตู ุงูุฑุงุจุน</button>
                <button class="btn" onclick="selectChapter(5)">ุงููุตู ุงูุฎุงูุณ</button>
                <button class="btn" onclick="selectChapter(6)">ุงููุตู ุงูุณุงุฏุณ</button>
                <button class="btn btn-full-curriculum" style="background:#28a745; color:#fff; margin-top:10px;" onclick="selectFullCurriculum()">ุงููููุฌ ูุงูู</button>
            </div>
        </div>

        <div id="question-count-page" class="page">
            <h2>ุงุฎุชุงุฑ ุนุฏุฏ ุงูุฃุณุฆูุฉ</h2>
            <div class="count-options">
                <button onclick="showTimerModal(5)" class="btn">5 ุฃุณุฆูุฉ</button>
                <button onclick="showTimerModal(10)" class="btn">10 ุฃุณุฆูุฉ</button>
                <button onclick="showTimerModal(15)" class="btn">15 ุฃุณุฆูุฉ</button>
                <button onclick="showTimerModal(20)" class="btn">20 ุฃุณุฆูุฉ</button>
                <button onclick="showTimerModal('all')" class="btn btn-full-chapter" style="background:#ffc107; color:#222; margin-top:10px;">ุฃุณุฆูุฉ ุงููุตู ูุงููุง</button>
            </div>
        </div>

        <div id="quiz-page" class="page">
            <div class="quiz-header">
                <span id="question-number"></span>
                <span id="timer"></span>
            </div>
            <div id="question-container" class="container">
                <div id="timer" style="font-size:1.2rem; color:#007bff; text-align:center; margin-bottom:10px; display:none;"></div>
                <!-- ุดุฑูุท ุงูุชูุฏู -->
                <div id="progress-bar-container" style="margin-bottom: 20px;">
                    <div id="progress-bar" style="height: 20px; background: #e9ecef; border-radius: 10px; overflow: hidden;">
                        <div id="progress-bar-fill" style="height: 100%; width: 0; background: #28a745; transition: width 0.4s;"></div>
                    </div>
                    <div id="progress-text" style="text-align: center; margin-top: 5px; font-weight: bold;"></div>
                </div>
                <h3 id="question-text"></h3>
                <div id="answers-container"></div>
            </div>
            <div id="quiz-navigation">
                <button id="prev-btn" class="btn" onclick="prevQuestion()">ุงูุณุงุจู</button>
                <button id="next-btn" class="btn" onclick="nextQuestion()">ุงูุชุงูู</button>
                <button id="submit-btn" class="btn" onclick="submitQuiz()" style="display:none">ุฅููุงุก ุงูุงุฎุชุจุงุฑ</button>
            </div>
        </div>

        <div id="results-page" class="page">
            <h2>ูุชูุฌุชู</h2>
            <p>ุฌุจุช <span id="score"></span> ูู <span id="total-questions"></span></p>
            <button class="btn" onclick="showReviewPage()">ุฑุงุฌุน ุฅุฌุงุจุงุชู</button>
            <button class="btn" onclick="showLeaderboardPage()">ุดูู ุงููุชุตุฏุฑูู</button>
            <button onclick="startNewExam()" class="btn">ุงุจุฏุฃ ุงูุชุญุงู ุฌุฏูุฏ</button>
        </div>

        <div id="review-page" class="page">
            <h2>ูุฑุงุฌุนุฉ ุงูุฅุฌุงุจุงุช</h2>
            <div id="review-container"></div>
            <button id="copy-review-btn" class="btn" style="margin: 15px 0;">ุงูุณุฎ ุงููุฑุงุฌุนุฉ ูููุต</button>
            <button class="btn" onclick="showPage('results-page')">ุงุฑุฌุน ูููุชูุฌุฉ</button>
        </div>

        <div id="leaderboard-page" class="page">
            <h2>ุฌุฏูู ุงููุชุตุฏุฑูู</h2>
            <div id="leaderboard-list" style="margin: 2rem 0;"></div>
            <button class="btn" onclick="showPage('welcome-page')">ุงุฑุฌุน ููุฑุฆูุณูุฉ</button>
        </div>
    </div>
    <!-- ูุงูุฐุฉ ุงุฎุชูุงุฑ ุงููุคูุช -->
    <div id="timer-modal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:1000; align-items:center; justify-content:center;">
        <div style="background:#fff; padding:30px 20px; border-radius:10px; max-width:90vw; text-align:center; box-shadow:0 2px 10px #0002;">
            <h3>ุนุงูุฒ ุชุดุบู ุงููุคูุช ูุงูุช ุจุชุญูุ</h3>
            <p>ูููู ุชุฎุชุงุฑ ุชุญู ุจููุช ุฃู ูู ุบูุฑ ููุช.</p>
            <button id="start-with-timer" class="btn" style="margin:10px;">ุดุบู ุงููุคูุช</button>
            <button id="start-without-timer" class="btn" style="margin:10px;">ูู ุบูุฑ ูุคูุช</button>
        </div>
    </div>
    <!-- ูุงูุฐุฉ ุชุฃููุฏ ุฅุฑุณุงู ุงูุงุฎุชุจุงุฑ -->
    <div id="submit-modal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:1000; align-items:center; justify-content:center;">
        <div style="background:#fff; padding:30px 20px; border-radius:10px; max-width:90vw; text-align:center; box-shadow:0 2px 10px #0002;">
            <h3>ุนุงูุฒ ุชุณูู ุงูุงูุชุญุงูุ</h3>
            <p>ูุชุฃูุฏ ุฅูู ุนุงูุฒ ุชุณููุ ูุด ูุชุนุฑู ุชุนุฏู ุจุนุฏ ูุฏู.</p>
            <button id="confirm-submit-btn" class="btn" style="margin:10px;">ุณูู ุงูุงูุชุญุงู</button>
            <button id="cancel-submit-btn" class="btn" style="margin:10px;">ูุฃุ ุงุณุชูู</button>
        </div>
    </div>
    <!-- ุฒุฑ info ุงูุฏุงุฆุฑู ุฃุณูู ูุณุงุฑ ุงูุตูุญุฉ -->
    <button id="info-btn" class="info-btn" title="ุฌุฑูุจ ุงูุชููุฌุฑุงู ููุฃุฎุจุงุฑ ูุงูุชุญุฏูุซุงุช">
        <span style="font-weight:bold; font-family:sans-serif;">i</span>
    </button>
    <!-- ูุงูุฐุฉ ุฌุฑูุจ ุงูุชููุฌุฑุงู ุนูุฏ ุงูุถุบุท ุนูู i -->
    <div id="telegram-modal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:6000; align-items:center; justify-content:center;">
        <div style="background:#fff; padding:28px 18px; border-radius:12px; max-width:90vw; min-width:300px; text-align:center; box-shadow:0 2px 16px #0002; position:relative;">
            <h3 style="color:#3498db; margin-bottom:1rem;">ุฌุฑูุจ ุงูุชููุฌุฑุงู ุงูุฑุณูู</h3>
            <div style="font-size:1.08rem; color:#222; margin-bottom:1.2rem;">
                ุชุงุจุน ูู ุฃุฎุจุงุฑ ุงูุชุญุฏูุซุงุช ูุงูููุงุฏ ุงูุฌุฏูุฏุฉ ุนูู ุฌุฑูุจ ุงูุชููุฌุฑุงู ุงูุฎุงุต ุจุงูุชุทุจูู ๐<br>
                <a href="https://t.me/QuizAppgg" target="_blank" style="display:inline-block; margin:1rem 0 0.5rem 0; color:#0077b6; font-weight:bold; text-decoration:underline; font-size:1.08rem;">https://t.me/QuizAppgg</a>
            </div>
            <button id="close-telegram-modal" class="btn" style="min-width:100px; font-size:1rem;">ุฅุบูุงู</button>
        </div>
    </div>
    <!-- ุฒุฑ ุฅุญุตุงุฆูุฉ ุนุฏุฏ ุงูุฃุณุฆูุฉ ุงููุฌุงุจ ุนูููุง (ุฌุฏูุฏ) -->
    <button id="solved-btn" class="star-btn" title="ุนุฏุฏ ุงูุฃุณุฆูุฉ ุงูุชู ุฃุฌุจุช ุนูููุง">
        <span style="font-weight:bold; font-family:sans-serif;">โ</span>
    </button>
    <!-- ูุงูุฐุฉ ุนุฏุฏ ุงูุฃุณุฆูุฉ ุงููุฌุงุจ ุนูููุง (ุฌุฏูุฏ) -->
    <div id="solved-modal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:3000; align-items:center; justify-content:center;">
        <div style="background:#fff; padding:30px 20px; border-radius:10px; max-width:90vw; min-width:300px; text-align:center; box-shadow:0 2px 10px #0002; position:relative;">
            <button id="close-solved-modal" style="position:absolute; top:10px; right:10px; background:none; border:none; font-size:1.5rem; color:#888; cursor:pointer;">&times;</button>
            <h3>ุฅุญุตุงุฆูุฉ ุงูุฃุณุฆูุฉ ุงููุฌุงุจ ุนูููุง</h3>
            <div id="solved-modal-count" style="font-size:1.3rem; color:#ffc107; margin: 20px 0;"></div>
        </div>
    </div>
    <!-- ูุงูุฐุฉ ุงูุจุฑูุฏ ููุชูุงุตู -->
    <div id="email-modal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:3000; align-items:center; justify-content:center;">
        <div style="background:#fff; padding:30px 20px; border-radius:10px; max-width:90vw; min-width:300px; text-align:center; box-shadow:0 2px 10px #0002; position:relative;">
            <button id="close-email-modal" style="position:absolute; top:10px; left:10px; background:none; border:none; font-size:1.5rem; color:#888; cursor:pointer;">&times;</button>
            <h3>ูู ุนูุฏู ูุดููุฉ ุฃู ุงูุชุฑุงุญ</h3>
            <p>ูู ููู ุฃู ูุดููุฉ ุฃู ุนูุฏู ุงูุชุฑุงุญุ ุงุจุนุชููุง ุนูู ุงูุฅูููู ุฏู:</p>
            <div style="display:flex; align-items:center; justify-content:center; gap:8px; margin: 15px 0;">
                <span id="support-email" style="font-size:1.1rem; direction:ltr; user-select:all;">georgeadel502@gmail.com</span>
                <button id="copy-email-btn" class="btn" style="padding:4px 12px; font-size:1rem;">ุงูุณุฎ</button>
            </div>
            <div style="margin: 10px 0; color: #333;">
                ุฃู ุชูุงุตู ุนูู ุฑูู ุงููุงุชู:
                <a href="tel:01278936828" class="info-phone-link">
                    01278936828
                </a>
            </div>
            <div id="copy-success" style="color:green; display:none;">ุงูุฅูููู ุงุชูุณุฎ!</div>
        </div>
    </div>
    <div id="system-modal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:4000; align-items:center; justify-content:center;">
        <div style="background:#fff; padding:30px 20px; border-radius:10px; max-width:90vw; min-width:300px; text-align:center; box-shadow:0 2px 10px #0002; position:relative;">
            <span id="system-modal-message" style="font-size:1.1rem; color:#333;"></span>
            <br>
            <div id="system-modal-buttons" style="margin-top:20px;">
                <button id="close-system-modal" class="btn">ุญุณูุงู</button>
                <button id="cancel-system-modal" class="btn" style="display:none;">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>
    <script src="questions.js"></script>
    <script src="chapter2.js"></script>
    <script src="chapter3.js"></script>
    <script src="chapter4.js"></script>
    <script src="chapter5.js"></script>
    <script src="chapter6.js"></script>
    <script src="script.js"></script>
    <script>
    // ูุงูุฐุฉ ุงูุชุญุฏูุซุงุช ุชุธูุฑ ูุฑุฉ ูุงุญุฏุฉ ููุท ุนูุฏ ุฃูู ุฏุฎูู (ูููุณ ุจุนุฏ ูุชุงุจุฉ ุงูุงุณู)
    window.addEventListener('DOMContentLoaded', function() {
        var modal = document.getElementById('updates-modal');
        var closeBtn = document.getElementById('close-updates-modal');
        // ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุชุจ ุงุณูู ูู ูุจูุ ูุง ุชุธูุฑ ุงููุงูุฐุฉ
        var hasUsername = localStorage.getItem('quiz-username');
        var updatesSeen = localStorage.getItem('updates-modal-seen');
        if (modal && closeBtn) {
            if (!hasUsername && !updatesSeen) {
                modal.style.display = 'flex';
            } else {
                modal.style.display = 'none';
            }
            closeBtn.onclick = function() {
                modal.style.display = 'none';
                localStorage.setItem('updates-modal-seen', '1');
            };
            // ุฅุบูุงู ุงููุงูุฐุฉ ุนูุฏ ุงูุถุบุท ุฎุงุฑุฌูุง
            modal.onclick = function(e) {
                if (e.target === modal) {
                    modal.style.display = 'none';
                    localStorage.setItem('updates-modal-seen', '1');
                }
            };
        }
        // ูุงูุฐุฉ ุฌุฑูุจ ุงูุชููุฌุฑุงู ุนูุฏ ุงูุถุบุท ุนูู ุฒุฑ i
        var infoBtn = document.getElementById('info-btn');
        var telegramModal = document.getElementById('telegram-modal');
        var closeTelegram = document.getElementById('close-telegram-modal');
        if (infoBtn && telegramModal && closeTelegram) {
            infoBtn.onclick = function() {
                telegramModal.style.display = 'flex';
            };
            closeTelegram.onclick = function() {
                telegramModal.style.display = 'none';
            };
            telegramModal.onclick = function(e) {
                if (e.target === telegramModal) telegramModal.style.display = 'none';
            };
        }
    });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
</body>
</html>
